<div id="profile-view" class="standard-view">
	<div class="container-fluid h-100">
		<div class="row h-100">
			<div id="profile-left-container" class="col-md-3 d-flex flex-column align-items-center pt-3">
				<div class="profile-pic mb-3">
					<img src="{{ profile_pic }}" alt="Profile Picture" class="img-fluid rounded-circle">
				</div>
				<div class="profile-info text-center">
					<h2>{{ user.username }}</h2>
					<p>Rank: <span>{{ rank }}</span></p>
					<p>Status: <span>{% if status == "online" %}Online{% else %}Offline{% endif %}</span></p>
					<div class="mt-3">
						{% if not own_profile %}
							<button id="friend-button" class="btn btn-primary">
								<i class="fas fa-user-plus"></i> Add Friend
							</button>
						{% endif %}
					</div>
				</div>
			</div>
			<div class="col-md-9 d-flex flex-column">
				<div id="profile-top-container" class="row">
					<ul class="nav nav-tabs" id="profileTabs" role="tablist">
						<li class="nav-item" role="presentation">
							<button class="nav-link active" id="about-tab" data-bs-toggle="tab" data-bs-target="#about" type="button" role="tab" aria-controls="about" aria-selected="true">About</button>
						</li>
						<li class="nav-item" role="presentation">
							<button class="nav-link" id="stats-tab" data-bs-toggle="tab" data-bs-target="#stats" type="button" role="tab" aria-controls="stats" aria-selected="false">Stats</button>
						</li>
						<li class="nav-item" role="presentation">
							<button class="nav-link" id="history-tab" data-bs-toggle="tab" data-bs-target="#history" type="button" role="tab" aria-controls="history" aria-selected="false">Match History</button>
						</li>
						<li class="nav-item" role="presentation">
							<button class="nav-link" id="friends-tab" data-bs-toggle="tab" data-bs-target="#friends" type="button" role="tab" aria-controls="friends" aria-selected="false">Friends</button>
						</li>
					</ul>
				</div>
				<div id="profile-right-container" class="row flex-grow-1">
					<div class="tab-content p-3">

						<!-- About Tab -->
						<div class="tab-pane fade show active" id="about" role="tabpanel" aria-labelledby="about-tab">
							<h4>About {{ user.username }}</h4>
							<div class="card">
								<div class="card-body">
									<p>
										<strong style="color: #6c757d;">UUID:</strong> 
										<span style="color: #6c757d;">{{ about.uuid }}</span>
									</p>
									<p>
										<strong style="color: #6c757d;">First joined:</strong> 
										<span style="color: #6c757d;">{{ about.first_joined }}</span>
									</p>
									<p>
										<strong style="color: #6c757d;">Last seen:</strong> 
										<span style="color: #6c757d;">{{ about.last_seen }}</span>
									</p>
								</div>
							</div>
						</div>
						
						<!-- Stats Tab -->
						<div class="tab-pane fade" id="stats" role="tabpanel" aria-labelledby="stats-tab">
							<h4>Player Statistics</h4>
							<div class="card">
								<div class="card-body">
									<div class="row text-center">
										<div class="col-md-4">
											<h5 style="color: #6c757d;">Total Games</h5>
											<p class="display-4" style="color: #6c757d;">{{ stats.total }}</p>
										</div>
										<div class="col-md-4">
											<h5 style="color: #6c757d;">Wins</h5>
											<p class="display-4 text-success">{{ stats.total_w }}</p>
										</div>
										<div class="col-md-4">
											<h5 style="color: #6c757d;">Losses</h5>
											<p class="display-4 text-danger">{{ stats.total_l }}</p>
										</div>
									</div>
								</div>
							</div>
						</div>
						
						<!-- Match History Tab -->
						<div class="tab-pane fade" id="history" role="tabpanel" aria-labelledby="history-tab">
							<h4>Match History</h4>
							
							<div class="table-responsive">
								<table class="table">
									<thead class="table-light">
										<tr>
											<th>Result</th>
											<th>Score</th>
											<th>Date</th>
											<th>Game ID</th>
											<th>Opponent</th>
										</tr>
									</thead>
									<tbody>
										{% for game in matches %}
										<tr class="{% if game.position == 'p1' %}table-primary{% else %}table-danger{% endif %}">
											<td>
												<span class="badge {% if game.result == 'win' %}bg-success{% else %}bg-dark{% endif %}">
													{% if game.result == 'win' %}üèÜ WIN{% else %}üí© LOSS{% endif %}
												</span>
											</td>
											<td>{{ game.score }}</td>
											<td>{{ game.date }}</td>
											<td>{{ game.game_id }}</td>
											<td><a href="#/profile/{{ game.opponent }}/" style="text-decoration: none; color: inherit;">{{ game.opponent }}</a></td>
										</tr>
										{% empty %}
										<tr>
											<td colspan="5" class="text-center">No match history available</td>
										</tr>
										{% endfor %}
									</tbody>
								</table>
							</div>
						</div>
						
						<!-- Friends Tab -->
						<div class="tab-pane fade" id="friends" role="tabpanel" aria-labelledby="friends-tab">
							<h4>Friends</h4>
							<div class="list-group">
								{% for friend in friends.list %}
								<a href="#/profile/{{ friend.username }}/" class="list-group-item list-group-item-action">
									<div class="d-flex align-items-center">
										<div id="friend-image-container" class="me-3">
											<img id="friend-image" src="{{ friend.profile_pic }}" alt="{{ friend.username }}" class="rounded-circle">
										</div>

										<div class="flex-grow-1 ms-3"> 
											<div class="d-flex justify-content-between align-items-center">
												<h6 class="mb-0">{{ friend.username }}</h6>
												<div>
													<span class="badge bg-secondary me-2">Rank: {{ friend.rank }}</span>
													<span class="badge {% if friend.status == 'online' %}bg-success{% else %}bg-secondary{% endif %} rounded-pill">
														{{ friend.status }}
													</span>
												</div>
											</div>
										</div>
									</div>
								</a>
								{% empty %}
								<div class="list-group-item text-center">No friends yet</div>
								{% endfor %}
							</div>
						</div>
						
					</div>
				</div>
			</div>
		</div>
	</div>
</div>